<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The bill - × ×™×”×•×œ ×”×•×¦××•×ª ××©×•×ª×¤×•×ª</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="stylesheet" href="/static/modern-override.css">
    <style>
        /* ğŸ¨ ULTRA MODERN DESIGN 2.0 */
        
        /* Global Enhancements */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            background-attachment: fixed !important;
            min-height: 100vh;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(102, 126, 234, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(118, 75, 162, 0.2) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }
        
        #app-container {
            position: relative;
            z-index: 1;
        }
        
        /* Animated Header */
        header,
        header.header {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(20px) !important;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1) !important;
            position: sticky !important;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(102, 126, 234, 0.2);
            min-height: 120px;
        }
        
        header .header {
            position: relative;
        }
        
        header h1 {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 3rem !important;
            font-weight: 800 !important;
            animation: gradientShift 3s ease infinite;
            text-shadow: none !important;
            position: relative;
            z-index: 10;
        }
        
        @keyframes gradientShift {
            0%, 100% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(20deg); }
        }
        
        header h2 {
            color: #667eea !important;
            font-weight: 500 !important;
            opacity: 0.8;
            position: relative;
            z-index: 10;
        }
        
        /* Glass Morphism Main Container */
        main {
            background: rgba(255, 255, 255, 0.85) !important;
            backdrop-filter: blur(20px) !important;
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.5) !important;
            animation: slideUp 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes slideUp {
            from {
                transform: translateY(100px) scale(0.9);
                opacity: 0;
            }
            to {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }
        
        /* Ultra Modern Buttons */
        .primary-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            color: white !important;
            border: none !important;
            padding: 14px 32px !important;
            font-weight: 600 !important;
            font-size: 1rem !important;
            border-radius: 50px !important;
            box-shadow: 
                0 4px 15px rgba(102, 126, 234, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55) !important;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .primary-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .primary-btn:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .primary-btn:hover {
            transform: translateY(-5px) scale(1.05) !important;
            box-shadow: 
                0 15px 40px rgba(102, 126, 234, 0.6),
                0 5px 15px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
        }
        
        .primary-btn:active {
            transform: translateY(-2px) scale(1.02) !important;
        }
        
        .secondary-btn {
            background: rgba(255, 255, 255, 0.9) !important;
            border: 2px solid #667eea !important;
            color: #667eea !important;
            padding: 12px 28px !important;
            font-weight: 600 !important;
            border-radius: 50px !important;
            backdrop-filter: blur(10px) !important;
            transition: all 0.3s ease !important;
        }
        
        .secondary-btn:hover {
            background: #667eea !important;
            color: white !important;
            transform: translateY(-3px) !important;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4) !important;
        }
        
        .danger-btn {
            background: linear-gradient(135deg, #ff5252 0%, #f48fb1 100%) !important;
            border-radius: 50px !important;
            box-shadow: 0 4px 15px rgba(255, 82, 82, 0.4) !important;
        }
        
        .danger-btn:hover {
            transform: translateY(-5px) scale(1.05) !important;
            box-shadow: 0 15px 40px rgba(255, 82, 82, 0.6) !important;
        }
        
        /* Floating Cards with 3D Effect */
        .group-item,
        .member-item,
        .payment-item {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(10px) !important;
            border: 1px solid rgba(102, 126, 234, 0.2) !important;
            border-radius: 20px !important;
            padding: 24px !important;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55) !important;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08) !important;
        }
        
        .group-item::after,
        .member-item::after,
        .payment-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: left 0.5s;
        }
        
        .group-item:hover::after,
        .member-item:hover::after,
        .payment-item:hover::after {
            left: 100%;
        }
        
        .group-item::before,
        .member-item::before,
        .payment-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
            transform: scaleY(0);
            transform-origin: top;
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        .group-item:hover,
        .member-item:hover,
        .payment-item:hover {
            transform: translateY(-10px) translateX(10px) rotate(1deg) !important;
            box-shadow: 
                0 20px 50px rgba(102, 126, 234, 0.3),
                0 10px 20px rgba(0, 0, 0, 0.1) !important;
            border-color: #667eea !important;
            background: white !important;
        }
        
        .group-item:hover::before,
        .member-item:hover::before,
        .payment-item:hover::before {
            transform: scaleY(1);
        }
        
        /* Glowing Avatar */
        .member-avatar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            box-shadow: 
                0 4px 15px rgba(102, 126, 234, 0.4),
                0 0 30px rgba(102, 126, 234, 0.2) !important;
            animation: avatarPulse 2s ease-in-out infinite;
            position: relative;
        }
        
        @keyframes avatarPulse {
            0%, 100% {
                box-shadow: 
                    0 4px 15px rgba(102, 126, 234, 0.4),
                    0 0 20px rgba(102, 126, 234, 0.2);
            }
            50% {
                box-shadow: 
                    0 4px 20px rgba(102, 126, 234, 0.6),
                    0 0 40px rgba(102, 126, 234, 0.4);
            }
        }
        
        /* Animated Badge */
        .count-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.4) !important;
            animation: badgeBounce 2s ease infinite;
        }
        
        @keyframes badgeBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        /* Success Message with Animation */
        .message.success {
            background: linear-gradient(135deg, #00c9a7 0%, #00f2fe 100%) !important;
            border-radius: 15px !important;
            box-shadow: 0 10px 40px rgba(0, 201, 167, 0.4) !important;
            animation: slideInRight 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(400px) rotate(10deg);
                opacity: 0;
            }
            to {
                transform: translateX(0) rotate(0);
                opacity: 1;
            }
        }
        
        .message.error {
            background: linear-gradient(135deg, #ff5252 0%, #f48fb1 100%) !important;
            border-radius: 15px !important;
            box-shadow: 0 10px 40px rgba(255, 82, 82, 0.4) !important;
        }
        
        /* Glassmorphism Modal */
        .modal {
            backdrop-filter: blur(10px) !important;
            background: rgba(0, 0, 0, 0.5) !important;
        }
        
        .modal-content {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(20px) !important;
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            border-radius: 25px !important;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.3) !important;
            animation: modalPop 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes modalPop {
            0% {
                transform: scale(0.5) rotate(-10deg);
                opacity: 0;
            }
            100% {
                transform: scale(1) rotate(0);
                opacity: 1;
            }
        }
        
        /* Enhanced Tabs */
        .tab-btn {
            position: relative;
            transition: all 0.3s ease !important;
        }
        
        .tab-btn.active {
            color: #667eea !important;
        }
        
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 3px 3px 0 0;
            animation: tabSlide 0.3s ease;
        }
        
        @keyframes tabSlide {
            from {
                width: 0;
                left: 50%;
            }
            to {
                width: 100%;
                left: 0;
            }
        }
        
        /* Floating Animation for Cards */
        .group-item,
        .member-item,
        .payment-item {
            animation: cardFloat 3s ease-in-out infinite;
        }
        
        .group-item:nth-child(2n) {
            animation-delay: 0.5s;
        }
        
        .group-item:nth-child(3n) {
            animation-delay: 1s;
        }
        
        @keyframes cardFloat {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-5px);
            }
        }
        
        /* Loading Screen Enhancement */
        #loading-screen {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
        }
        
        .spinner {
            width: 60px !important;
            height: 60px !important;
            border: 5px solid rgba(255, 255, 255, 0.2) !important;
            border-top: 5px solid white !important;
            animation: spin 0.8s linear infinite, pulse 2s ease-in-out infinite !important;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(180deg); }
        }
        
        /* Enhanced Input Fields */
        input:focus,
        textarea:focus,
        select:focus {
            outline: none !important;
            border-color: #667eea !important;
            box-shadow: 
                0 0 0 4px rgba(102, 126, 234, 0.1),
                0 5px 15px rgba(102, 126, 234, 0.2) !important;
            transform: translateY(-2px) !important;
        }
        
        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 12px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
        }
        
        /* Hover Glow Effect */
        .primary-btn,
        .group-item,
        .member-item,
        .payment-item {
            position: relative;
        }
        
        /* Mobile Responsive Enhancements */
        @media (max-width: 768px) {
            header h1 {
                font-size: 2rem !important;
            }
            
            .primary-btn {
                padding: 12px 24px !important;
                font-size: 0.9rem !important;
            }
        }
        
        /* ğŸ  Household Unit Styles */
        .household-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            border-radius: 20px !important;
            padding: 20px !important;
            margin: 20px 0 !important;
            position: relative !important;
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.4) !important;
            animation: householdGlow 3s ease-in-out infinite !important;
            border: 2px solid rgba(255, 255, 255, 0.3) !important;
        }
        
        @keyframes householdGlow {
            0%, 100% { 
                box-shadow: 0 8px 32px rgba(102, 126, 234, 0.4);
            }
            50% { 
                box-shadow: 0 12px 40px rgba(102, 126, 234, 0.6), 
                           0 0 60px rgba(102, 126, 234, 0.3);
            }
        }
        
        .household-header {
            display: flex !important;
            align-items: center !important;
            justify-content: space-between !important;
            color: white !important;
            margin-bottom: 15px !important;
            padding-bottom: 10px !important;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3) !important;
        }
        
        .household-title {
            display: flex !important;
            align-items: center !important;
            gap: 10px !important;
            font-size: 1.3rem !important;
            font-weight: 700 !important;
        }
        
        .household-icon {
            font-size: 28px !important;
            animation: heartBeat 2s ease-in-out infinite !important;
        }
        
        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            10%, 30% { transform: scale(1.1); }
            20%, 40% { transform: scale(0.9); }
        }
        
        .household-members-grid {
            display: flex !important;
            flex-wrap: wrap !important;
            gap: 12px !important;
        }
        
        .household-member-card {
            background: rgba(255, 255, 255, 0.25) !important;
            backdrop-filter: blur(10px) !important;
            border: 2px solid rgba(255, 255, 255, 0.4) !important;
            border-radius: 15px !important;
            padding: 12px 18px !important;
            color: white !important;
            font-weight: 600 !important;
            display: flex !important;
            align-items: center !important;
            gap: 8px !important;
            transition: all 0.3s ease !important;
            cursor: default !important;
        }
        
        .household-member-card:hover {
            transform: translateY(-2px) !important;
            background: rgba(255, 255, 255, 0.35) !important;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2) !important;
        }
        
        .household-balance {
            background: rgba(255, 255, 255, 0.9) !important;
            color: #667eea !important;
            padding: 8px 16px !important;
            border-radius: 12px !important;
            font-weight: 700 !important;
            font-size: 1.1rem !important;
        }
        
        .household-delete-btn {
            background: rgba(255, 82, 82, 0.9) !important;
            color: white !important;
            border: none !important;
            width: 32px !important;
            height: 32px !important;
            border-radius: 50% !important;
            cursor: pointer !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            transition: all 0.3s ease !important;
            font-size: 14px !important;
        }
        
        .household-delete-btn:hover {
            background: rgba(255, 82, 82, 1) !important;
            transform: scale(1.1) rotate(90deg) !important;
            box-shadow: 0 4px 15px rgba(255, 82, 82, 0.5) !important;
        }
        
        /* Drag & Drop States */
        .member-item {
            cursor: grab !important;
            transition: all 0.3s ease !important;
        }
        
        .member-item.dragging {
            opacity: 0.5 !important;
            cursor: grabbing !important;
            transform: scale(0.95) !important;
            box-shadow: 0 20px 50px rgba(102, 126, 234, 0.4) !important;
        }
        
        .member-item.drag-over {
            transform: scale(1.05) !important;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.6), 
                       0 20px 50px rgba(102, 126, 234, 0.4) !important;
            background: rgba(102, 126, 234, 0.1) !important;
        }
        
        .member-item.drag-over::before {
            content: "×©×—×¨×¨ ×›×“×™ ×œ×—×‘×¨ ×œ×ª× ××©×¤×—×ª×™" !important;
            position: absolute !important;
            top: -30px !important;
            left: 50% !important;
            transform: translateX(-50%) !important;
            background: #667eea !important;
            color: white !important;
            padding: 6px 12px !important;
            border-radius: 8px !important;
            font-size: 0.85rem !important;
            white-space: nowrap !important;
            z-index: 1000 !important;
            animation: bounceIn 0.3s ease !important;
        }
        
        @keyframes bounceIn {
            0% { transform: translateX(-50%) scale(0); opacity: 0; }
            50% { transform: translateX(-50%) scale(1.1); }
            100% { transform: translateX(-50%) scale(1); opacity: 1; }
        }
        
        /* Household Creation Hint */
        .household-hint {
            text-align: center !important;
            color: #667eea !important;
            font-size: 0.9rem !important;
            margin-top: 15px !important;
            padding: 12px !important;
            background: rgba(102, 126, 234, 0.1) !important;
            border-radius: 10px !important;
            border: 2px dashed rgba(102, 126, 234, 0.3) !important;
        }
        
        .household-hint i {
            margin-left: 8px !important;
        }
    </style>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts - Assistant and Rubik -->
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;500;600;700&family=Rubik:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="spinner"></div>
        <p>×˜×•×¢×Ÿ...</p>
        <div class="loading-dots">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>

    <!-- Error/Success Messages -->
    <div id="error-container" class="message error"></div>
    <div id="success-container" class="message success"></div>

    <!-- Main Container -->
    <div id="app-container">
        <!-- Header -->
        <header class="header">
            <h1>The bill</h1>
            <h2>× ×™×”×•×œ ×”×•×¦××•×ª ××©×•×ª×¤×•×ª</h2>
        </header>

        <!-- Main Content Area -->
        <main>
            <!-- Home Page (Groups List) -->
            <section id="groups-screen" class="screen active">
                <div class="screen-header">
                    <h3>×”×§×‘×•×¦×•×ª ×©×œ×™</h3>
                    <button id="create-group-btn" class="primary-btn">×§×‘×•×¦×” ×—×“×©×”</button>
                </div>
                <div id="groups-list" class="items-list">
                    <!-- Groups will be added dynamically -->
                </div>
            </section>

            <!-- Group Screen -->
            <section id="group-screen" class="screen">
                <div class="screen-header">
                    <button class="back-btn" data-target="groups-screen">×—×–×¨×”</button>
                    <h3 id="group-name">×©× ×”×§×‘×•×¦×”</h3>
                    <div class="action-buttons">
                        <button id="help-btn" class="secondary-btn"><i class="fas fa-question-circle"></i> ×¢×–×¨×”</button>
                        <button id="edit-group-btn" class="secondary-btn"><i class="fas fa-edit"></i> ×¢×¨×™×›×”</button>
                        <button id="delete-group-btn" class="danger-btn"><i class="fas fa-trash"></i> ××—×™×§×”</button>
                    </div>
                </div>

                <div class="tabs">
                    <button class="tab-btn active" data-tab="members">
                        ×—×‘×¨×™× <span class="count-badge" id="members-count">0</span>
                    </button>
                    <button class="tab-btn" data-tab="payments">
                        ×ª×©×œ×•××™× <span class="count-badge" id="payments-count">0</span>
                    </button>
                    <button class="tab-btn" data-tab="balance">××™×–×•×Ÿ</button>
                </div>

                <div id="members-tab" class="tab-content active">
                    <div class="tab-header">
                        <h4>×—×‘×¨×™ ×”×§×‘×•×¦×”</h4>
                        <button id="add-member-btn" class="primary-btn"> ×”×•×¡×£ ×—×‘×¨</button>
                    </div>
                    <div id="members-list" class="items-list">
                        <!-- Members will be added dynamically -->
                    </div>
                </div>

                <div id="payments-tab" class="tab-content">
                    <div class="tab-header">
                        <div class="filter-controls">
                            <select id="payment-filter">
                                <option value="all">×›×œ ×”×ª×©×œ×•××™×</option>
                                <option value="my-expenses">×”×ª×©×œ×•××™× ×©×œ×™</option>
                                <option value="involving-me">×©×™×œ××• ×¢×‘×•×¨×™</option>
                            </select>
                        </div>
                        <button id="add-payment-btn" class="primary-btn"> ×”×•×¡×£ ×ª×©×œ×•×</button>
                    </div>
                    <div id="payments-list" class="items-list">
                        <!-- Payments will be added dynamically -->
                    </div>
                </div>

                <div id="balance-tab" class="tab-content">
                    <div class="section-title">
                        <h4>×¡×™×›×•× ×”×¢×‘×¨×•×ª ×›×¡×¤×™×</h4>
                        <div class="action-buttons">
                            <button id="export-summary-btn" class="secondary-btn small">×™×™×¦×•× ×¡×™×›×•× ×œ×—×‘×¨×™×</button>
                            <button id="export-data-btn" class="secondary-btn small">×™×™×¦×•× × ×ª×•× ×™×</button>
                        </div>
                    </div>
                    <div id="transfers-list" class="items-list">
                        <!-- Transfers will be added dynamically -->
                    </div>
                </div>
            </section>

            <!-- Member Details Screen -->
            <section id="member-screen" class="screen">
                <div class="screen-header">
                    <button class="back-btn" onclick="showScreen('group-screen')">×—×–×¨×”</button>
                    <h3 id="member-name">×©× ×”×—×‘×¨</h3>
                    <div class="action-buttons">
                        <button id="edit-member-btn" class="secondary-btn">×¢×¨×™×›×”</button>
                        <button id="remove-member-btn" class="danger-btn">×”×¡×¨×”</button>
                    </div>
                </div>

                <div id="member-summary">
                    <div class="balance-info">
                        <h4>×××–×Ÿ ×›×¡×¤×™</h4>
                        <p id="member-balance" class="balance">0 â‚ª</p>
                    </div>

                    <div class="transfers-section">
                        <div id="member-pays-to">
                            <h4>×œ×©×œ× ×œ:</h4>
                            <ul class="transfers">
                                <!-- Will be populated dynamically -->
                            </ul>
                        </div>
                        <div id="member-receives-from">
                            <h4>×œ×§×‘×œ ×:</h4>
                            <ul class="transfers">
                                <!-- Will be populated dynamically -->
                            </ul>
                        </div>
                    </div>

                    <div class="payments-section">
                        <h4>×”×™×¡×˜×•×¨×™×™×ª ×ª×©×œ×•××™×</h4>
                        <div id="member-payments" class="items-list">
                            <!-- Will be populated dynamically -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Payment Details Screen -->
            <section id="payment-screen" class="screen">
                <div class="screen-header">
                    <button class="back-btn" onclick="showScreen('group-screen')">×—×–×¨×”</button>
                    <h3 id="payment-title">×¤×¨×˜×™ ×ª×©×œ×•×</h3>
                    <div class="action-buttons">
                        <button id="edit-payment-btn" class="secondary-btn">×¢×¨×™×›×”</button>
                        <button id="delete-payment-btn" class="danger-btn">××—×™×§×”</button>
                    </div>
                </div>

                <div id="payment-details">
                    <div class="payment-info">
                        <div class="info-row">
                            <span class="label">×¡×›×•×:</span>
                            <span id="payment-amount" class="value">0 â‚ª</span>
                        </div>
                        <div class="info-row">
                            <span class="label">×©×™×œ×:</span>
                            <span id="payment-payer" class="value"></span>
                        </div>
                        <div class="info-row">
                            <span class="label">×ª××¨×™×š:</span>
                            <span id="payment-date" class="value"></span>
                        </div>
                        <div class="info-row">
                            <span class="label">×ª×™××•×¨:</span>
                            <span id="payment-description" class="value"></span>
                        </div>
                    </div>

                    <div class="payment-breakdown">
                        <h4>×—×œ×•×§×ª ×”×ª×©×œ×•×</h4>
                        <div class="info-row">
                            <span class="label">×¡×›×•× ××§×•×¨×™:</span>
                            <span id="original-amount" class="value">0 â‚ª</span>
                        </div>
                        <div class="info-row">
                            <span class="label">×¡×›×•× ××¢×•×’×œ:</span>
                            <span id="rounded-amount" class="value">0 â‚ª</span>
                        </div>
                        <div class="info-row">
                            <span class="label">×¡×›×•× ×œ××“×:</span>
                            <span id="per-person-amount" class="value">0 â‚ª</span>
                        </div>
                    </div>

                    <div class="participants-section">
                        <h4>××©×ª×ª×¤×™×</h4>
                        <ul id="participant-list">
                            <!-- Will be populated dynamically -->
                        </ul>
                    </div>

                    <div class="transfers-section">
                        <h4>×”×¢×‘×¨×•×ª ×œ××™×–×•×Ÿ</h4>
                        <ul id="payment-transfers" class="transfers">
                            <!-- Will be populated dynamically -->
                        </ul>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modals -->
    <!-- Create Group Modal -->
    <div id="create-group-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>×™×¦×™×¨×ª ×§×‘×•×¦×” ×—×“×©×”</h3>
            <form id="create-group-form">
                <div class="form-group">
                    <label for="group-name-input">×©× ×”×§×‘×•×¦×”</label>
                    <input type="text" id="group-name-input" required>
                </div>
                <div class="form-group">
                    <label for="admin-first-name">×©× ×¤×¨×˜×™ (×× ×”×œ)</label>
                    <input type="text" id="admin-first-name" required>
                </div>
                <div class="form-group">
                    <label for="admin-last-name">×©× ××©×¤×—×” (×× ×”×œ)</label>
                    <input type="text" id="admin-last-name" required>
                </div>
                <button type="submit" class="primary-btn">×¦×•×¨ ×§×‘×•×¦×”</button>
            </form>
        </div>
    </div>

    <!-- Add Member Modal -->
    <div id="add-member-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>×”×•×¡×¤×ª ×—×‘×¨ ×œ×§×‘×•×¦×”</h3>
            <form id="add-member-form">
                <div class="form-group">
                    <label for="first-name-input">×©× ×¤×¨×˜×™</label>
                    <input type="text" id="first-name-input" required>
                </div>
                <div class="form-group">
                    <label for="last-name-input">×©× ××©×¤×—×”</label>
                    <input type="text" id="last-name-input" required>
                </div>
                <button type="submit" class="primary-btn">×”×•×¡×£ ×—×‘×¨</button>
            </form>
        </div>
    </div>

    <!-- Add Payment Modal -->
    <div id="add-payment-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>×”×•×¡×¤×ª ×ª×©×œ×•× ×—×“×©</h3>
            <form id="add-payment-form">
                <div class="form-group">
                    <label for="payment-title-input">×›×•×ª×¨×ª ×ª×©×œ×•×</label>
                    <input type="text" id="payment-title-input" required>
                </div>
                <div class="form-group">
                    <label for="payment-amount-input">×¡×›×•×</label>
                    <input type="number" id="payment-amount-input" min="1" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="payment-payer-select">××™ ×©×™×œ×?</label>
                    <select id="payment-payer-select" required>
                        <!-- Will be populated dynamically -->
                    </select>
                </div>
                <div class="form-group">
                    <label>×¢×‘×•×¨ ××™?</label>
                    <div id="payment-participants" class="checkbox-group">
                        <!-- Will be populated dynamically -->
                    </div>
                </div>
                <div class="form-group">
                    <label for="payment-desc-input">×ª×™××•×¨ (××•×¤×¦×™×•× ×œ×™)</label>
                    <textarea id="payment-desc-input"></textarea>
                </div>
                <button type="submit" class="primary-btn">×”×•×¡×£ ×ª×©×œ×•×</button>
            </form>
        </div>
    </div>

    <!-- Edit Member Modal -->
    <div id="edit-member-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>×¢×¨×™×›×ª ×¤×¨×˜×™ ×—×‘×¨</h3>
            <form id="edit-member-form">
                <input type="hidden" id="edit-member-old-name">
                <div class="form-group">
                    <label for="edit-first-name">×©× ×¤×¨×˜×™</label>
                    <input type="text" id="edit-first-name" required>
                </div>
                <div class="form-group">
                    <label for="edit-last-name">×©× ××©×¤×—×”</label>
                    <input type="text" id="edit-last-name" required>
                </div>
                <div class="form-group">
                    <label for="edit-member-permissions">×”×¨×©××•×ª:</label>
                    <select id="edit-member-permissions">
                        <option value="true">×™×›×•×œ ×œ×”×•×¡×™×£ ×ª×©×œ×•××™×</option>
                        <option value="false">×œ× ×™×›×•×œ ×œ×”×•×¡×™×£ ×ª×©×œ×•××™×</option>
                    </select>
                </div>
                <button type="submit" class="primary-btn">×©××•×¨ ×©×™× ×•×™×™×</button>
            </form>
        </div>
    </div>

    <!-- Edit Payment Modal -->
    <div id="edit-payment-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>×¢×¨×™×›×ª ×ª×©×œ×•×</h3>
            <form id="edit-payment-form">
                <input type="hidden" id="edit-payment-id">
                <div class="form-group">
                    <label for="edit-payment-title">×›×•×ª×¨×ª ×ª×©×œ×•×</label>
                    <input type="text" id="edit-payment-title" required>
                </div>
                <div class="form-group">
                    <label for="edit-payment-amount">×¡×›×•×</label>
                    <input type="number" id="edit-payment-amount" min="1" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="edit-payment-payer">××™ ×©×™×œ×?</label>
                    <select id="edit-payment-payer" required>
                        <!-- Will be populated dynamically -->
                    </select>
                </div>
                <div class="form-group">
                    <label>×¢×‘×•×¨ ××™?</label>
                    <div id="edit-payment-participants" class="checkbox-group">
                        <!-- Will be populated dynamically -->
                    </div>
                </div>
                <div class="form-group">
                    <label for="edit-payment-desc">×ª×™××•×¨ (××•×¤×¦×™×•× ×œ×™)</label>
                    <textarea id="edit-payment-desc"></textarea>
                </div>
                <button type="submit" class="primary-btn">×©××•×¨ ×©×™× ×•×™×™×</button>
            </form>
        </div>
    </div>

    <!-- Summary Export Modal -->
    <div id="summary-modal" class="modal">
        <div class="modal-content summary-modal-content">
            <span class="close-modal">&times;</span>
            <h3>×¡×™×›×•× ×ª×©×œ×•××™× ×œ×—×‘×¨×™×</h3>
            <div class="summary-actions">
                <button id="copy-summary-btn" class="primary-btn">
                    <i class="fas fa-copy"></i> ×”×¢×ª×§ ×œ×œ×•×—
                </button>
            </div>
            <pre id="summary-content" class="summary-content"></pre>
        </div>
    </div>

    <!-- Member Merge Modal -->
    <div id="merge-members-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>××™×—×•×“ ×—×‘×¨×™×</h3>
            <p>×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×“ ××ª ×”×—×‘×¨×™× ×”×‘××™×?</p>
            <div class="merge-members-list">
                <div id="member-to-merge-from" class="member-merge-item"></div>
                <div class="merge-arrow"><i class="fas fa-arrow-right"></i></div>
                <div id="member-to-merge-to" class="member-merge-item"></div>
            </div>
            <p class="merge-warning">×©×™× ×œ×‘! ×¤×¢×•×œ×” ×–×• ×œ× × ×™×ª× ×ª ×œ×‘×™×˜×•×œ.</p>
            <div class="modal-actions">
                <button id="confirm-merge-btn" class="primary-btn">××™×©×•×¨ ××™×—×•×“</button>
                <button class="secondary-btn close-modal-btn">×‘×™×˜×•×œ</button>
            </div>
        </div>
    </div>

    <!-- Edit Group Modal -->
    <div id="edit-group-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>×¢×¨×™×›×ª ×¤×¨×˜×™ ×§×‘×•×¦×”</h3>
            <form id="edit-group-form">
                <div class="form-group">
                    <label for="edit-group-name">×©× ×”×§×‘×•×¦×”</label>
                    <input type="text" id="edit-group-name" required>
                </div>
                <button type="submit" class="primary-btn">×©××•×¨ ×©×™× ×•×™×™×</button>
            </form>
        </div>
    </div>

    <!-- Delete Group Modal -->
    <div id="delete-group-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>××—×™×§×ª ×§×‘×•×¦×”</h3>
            <p>×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª ×”×§×‘×•×¦×” <span id="delete-group-name" class="highlight"></span>?</p>
            <p class="warning">×©×™× ×œ×‘! ×¤×¢×•×œ×” ×–×• ××™× ×” × ×™×ª× ×ª ×œ×‘×™×˜×•×œ.</p>
            <div class="modal-actions">
                <button id="confirm-delete-group-btn" class="danger-btn">×›×Ÿ, ××—×§ ×§×‘×•×¦×”</button>
                <button class="secondary-btn close-modal-btn">×‘×™×˜×•×œ</button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="help-modal" class="modal">
        <div class="modal-content help-modal-content">
            <span class="close-modal">&times;</span>
            <h3>××“×¨×™×š ×©×™××•×© - TheBill</h3>
            <div class="help-content">
                <h4>× ×™×”×•×œ ×§×‘×•×¦×•×ª</h4>
                <ul>
                    <li><strong>×™×¦×™×¨×ª ×§×‘×•×¦×”:</strong> ×œ×—×¥ ×¢×œ "×§×‘×•×¦×” ×—×“×©×”" ×‘××¡×š ×”×¨××©×™, ×”×–×Ÿ ××ª ×”×¤×¨×˜×™× ×•×œ×—×¥ "×¦×•×¨ ×§×‘×•×¦×”"</li>
                    <li><strong>×¢×¨×™×›×ª ×§×‘×•×¦×”:</strong> ×œ×—×¥ ×¢×œ "×¢×¨×™×›×”" ×‘×›×•×ª×¨×ª ×”×§×‘×•×¦×”, ×©× ×” ××ª ×”×©× ×•×œ×—×¥ "×©××•×¨ ×©×™× ×•×™×™×"</li>
                    <li><strong>××—×™×§×ª ×§×‘×•×¦×”:</strong> ×œ×—×¥ ×¢×œ "××—×™×§×”" ×‘×›×•×ª×¨×ª ×”×§×‘×•×¦×” (××¤×©×¨×™ ×¨×§ ×›××©×¨ ×›×œ ×”×™×ª×¨×•×ª ×××•×¤×¡×•×ª)</li>
                </ul>
                
                <h4>× ×™×”×•×œ ×—×‘×¨×™×</h4>
                <ul>
                    <li><strong>×”×•×¡×¤×ª ×—×‘×¨:</strong> ×¢×‘×•×¨ ×œ×œ×©×•× ×™×ª "×—×‘×¨×™×", ×œ×—×¥ ×¢×œ "×”×•×¡×£ ×—×‘×¨", ×”×–×Ÿ ××ª ×”×¤×¨×˜×™× ×•×œ×—×¥ "×”×•×¡×£ ×—×‘×¨"</li>
                    <li><strong>×¢×¨×™×›×ª ×—×‘×¨:</strong> ×œ×—×¥ ×¢×œ ×”×—×‘×¨ ×©×‘×¨×¦×•× ×š ×œ×¢×¨×•×š, ×œ×—×¥ "×¢×¨×™×›×”", ×©× ×” ××ª ×”×¤×¨×˜×™× ×•×œ×—×¥ "×©××•×¨ ×©×™× ×•×™×™×"</li>
                    <li><strong>×”×¡×¨×ª ×—×‘×¨:</strong> ×œ×—×¥ ×¢×œ ×”×—×‘×¨ ×©×‘×¨×¦×•× ×š ×œ×”×¡×™×¨, ×œ×—×¥ "×”×¡×¨×”" - ×”×—×‘×¨ ×™×•×¡×¨ ×™×—×“ ×¢× ×›×œ ×”×ª×©×œ×•××™× ×©×‘×™×¦×¢</li>
                </ul>
                
                <h4>ğŸ  ×ª××™× ××©×¤×—×ª×™×™× / ×›×œ×›×œ×™×™×</h4>
                <ul>
                    <li><strong>×™×¦×™×¨×ª ×ª× ××©×¤×—×ª×™:</strong> ×’×¨×•×¨ ×—×‘×¨ ××—×“ ×•×©×—×¨×¨ ××•×ª×• ×¢×œ ×—×‘×¨ ××—×¨ - ×™×™×¤×ª×— ×—×œ×•×Ÿ ×œ×™×¦×™×¨×ª ×ª× ××©×¤×—×ª×™</li>
                    <li><strong>×©× ××•×¤×¦×™×•× ×œ×™:</strong> × ×™×ª×Ÿ ×œ×ª×ª ×©× ×œ×ª× (×œ××©×œ "××©×¤×—×ª ×›×”×Ÿ") ××• ×œ×”×©××™×¨ ××ª ×”×©× ×”××•×˜×•××˜×™</li>
                    <li><strong>××™×š ×–×” ×¢×•×‘×“:</strong> ×‘×”×•×¡×¤×ª ×ª×©×œ×•××™× - ×¢×“×™×™×Ÿ ×ª×‘×—×¨ ×›×œ ××—×“ ×‘× ×¤×¨×“. ×‘××™×–×•×Ÿ - ×”×—×•×‘×•×ª ×©×œ×”× ×™××•×—×“×• ×œ×ª× ××—×“</li>
                    <li><strong>××—×™×§×ª ×ª×:</strong> ×œ×—×¥ ×¢×œ ×›×¤×ª×•×¨ ×”-X ×”××“×•× ×‘×¤×™× ×ª ×”×ª× ×”××©×¤×—×ª×™ - ×”×—×‘×¨×™× ×™×—×–×¨×• ×œ×”×™×•×ª ×¢×¦×××™×™×</li>
                    <li><strong>×¡×™×›×•× ×ª××™×:</strong> ×‘×™×™×¦×•× ×”×¡×™×›×•× ×”×›×œ×œ×™, ×ª××™× ××©×¤×—×ª×™×™× ××•×¦×’×™× ×›×™×—×™×“×” ××—×ª ×¢× ×××–×Ÿ ××©×•×ª×£</li>
                </ul>
                
                <h4>× ×™×”×•×œ ×ª×©×œ×•××™×</h4>
                <ul>
                    <li><strong>×”×•×¡×¤×ª ×ª×©×œ×•×:</strong> ×¢×‘×•×¨ ×œ×œ×©×•× ×™×ª "×ª×©×œ×•××™×", ×œ×—×¥ "×”×•×¡×£ ×ª×©×œ×•×", ××œ× ××ª ×”×¤×¨×˜×™× ×•×œ×—×¥ "×”×•×¡×£ ×ª×©×œ×•×"</li>
                    <li><strong>×¢×¨×™×›×ª ×ª×©×œ×•×:</strong> ×œ×—×¥ ×¢×œ ×”×ª×©×œ×•×, ×œ×—×¥ "×¢×¨×™×›×”", ×©× ×” ××ª ×”×¤×¨×˜×™× ×•×œ×—×¥ "×©××•×¨ ×©×™× ×•×™×™×"</li>
                    <li><strong>××—×™×§×ª ×ª×©×œ×•×:</strong> ×œ×—×¥ ×¢×œ ×”×ª×©×œ×•×, ×œ×—×¥ "××—×™×§×”" ×•××©×¨ ××ª ×”××—×™×§×”</li>
                </ul>
                
                <h4>××™×–×•×Ÿ ×•×™×™×¦×•×</h4>
                <ul>
                    <li><strong>×¦×¤×™×™×” ×‘×”×¢×‘×¨×•×ª:</strong> ×¢×‘×•×¨ ×œ×œ×©×•× ×™×ª "××™×–×•×Ÿ" ×œ×¦×¤×™×™×” ×‘×”×¢×‘×¨×•×ª ×”×›×¡×¤×™× ×”××•××œ×¦×•×ª (×ª××™× ××©×¤×—×ª×™×™× ××¡×•×× ×™× ×‘-ğŸ )</li>
                    <li><strong>×™×™×¦×•× ×¡×™×›×•× ×›×œ×œ×™:</strong> ×‘×œ×©×•× ×™×ª "××™×–×•×Ÿ", ×œ×—×¥ ×¢×œ "×™×™×¦×•× ×¡×™×›×•× ×œ×—×‘×¨×™×" ×œ×”×¢×ª×§×ª ×¡×™×›×•× ××¤×•×¨×˜ - ×ª××™× ××©×¤×—×ª×™×™× ××•×¦×’×™× ×›×™×—×™×“×” ××—×ª</li>
                    <li><strong>×™×™×¦×•× × ×ª×•× ×™×:</strong> ×‘×œ×©×•× ×™×ª "××™×–×•×Ÿ", ×œ×—×¥ ×¢×œ "×™×™×¦×•× × ×ª×•× ×™×" ×•×‘×—×¨ ×¤×•×¨××˜ (JSON ××• CSV) ×œ×’×™×‘×•×™ ××• × ×™×ª×•×— ×—×™×¦×•× ×™</li>
                </ul>
                
                <h4>ğŸ¨ ×¢×™×¦×•×‘ ×•××¤×§×˜×™×</h4>
                <ul>
                    <li><strong>×’×©× ××™×™×§×•× ×™×:</strong> ×‘×—×œ×§ ×”×¢×œ×™×•×Ÿ ×©×œ ×”××¡×š ×ª×•×›×œ ×œ×¨××•×ª ×× ×™××¦×™×” ×¢×“×™× ×” ×©×œ ××™×™×§×•× ×™× × ×•×¤×œ×™× (ğŸ’µğŸ’°ğŸ• ×•×›×•')</li>
                    <li><strong>××™×™×§×•× ×™× ×©×§×•×¤×™×:</strong> ×”×× ×™××¦×™×” ×›××¢×˜ ×©×§×•×¤×” ×›×“×™ ×œ× ×œ×”×¤×¨×™×¢ ×œ×—×•×•×™×™×ª ×”×©×™××•×©</li>
                    <li><strong>×ª××™× ××©×¤×—×ª×™×™×:</strong> ××•×¦×’×™× ×¢× ×”×™×œ×” ×¡×’×•×œ×” ×•×–×•×”×¨×ª ×•××™×™×§×•×Ÿ ğŸ </li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Household Creation Modal -->
    <div id="create-household-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>ğŸ  ×™×¦×™×¨×ª ×ª× ××©×¤×—×ª×™</h3>
            <p style="text-align: center; color: #667eea; margin-bottom: 20px;">
                <i class="fas fa-info-circle"></i>
                ×ª× ××©×¤×—×ª×™ ×××—×“ ××ª ×”×—×•×‘×•×ª ×•×”×–×›×•×™×•×ª ×©×œ ×—×‘×¨×™×• ×‘×—×™×©×•×‘ ×”××™×–×•×Ÿ
            </p>
            
            <div class="merge-members-list">
                <div class="member-merge-item">
                    <div class="member-avatar" id="household-member1-avatar"></div>
                    <div id="household-member1-name"></div>
                </div>
                <div class="merge-arrow">â™¥</div>
                <div class="member-merge-item">
                    <div class="member-avatar" id="household-member2-avatar"></div>
                    <div id="household-member2-name"></div>
                </div>
            </div>
            
            <div class="form-group">
                <label for="household-name-input">×©× ×”×ª× (××•×¤×¦×™×•× ×œ×™):</label>
                <input type="text" id="household-name-input" placeholder='×œ×“×•×’××”: "××©×¤×—×ª ×›×”×Ÿ" ××• ×”×©××¨ ×¨×™×§ ×œ×©× ××•×˜×•××˜×™'>
            </div>
            
            <div style="background: rgba(102, 126, 234, 0.1); padding: 15px; border-radius: 10px; margin: 15px 0;">
                <strong style="color: #667eea;">ğŸ’¡ ××” ×–×” ××•××¨?</strong>
                <ul style="margin-top: 10px; padding-right: 20px; color: #666;">
                    <li>×‘×”×•×¡×¤×ª ×ª×©×œ×•××™× - ×¢×“×™×™×Ÿ ×ª×‘×—×¨ ×›×œ ××—×“ ×‘× ×¤×¨×“</li>
                    <li>×‘×—×™×©×•×‘ ××™×–×•×Ÿ - ×”×—×•×‘×•×ª ×©×œ×”× ×™××•×—×“×• ×œ×ª× ××—×“</li>
                    <li>×”×ª× ×™×—×©×‘ ×›×™×—×™×“×” ×›×œ×›×œ×™×ª ××—×ª</li>
                </ul>
            </div>
            
            <div class="modal-actions">
                <button id="confirm-household-btn" class="primary-btn">
                    <i class="fas fa-check"></i> ×¦×•×¨ ×ª× ××©×¤×—×ª×™
                </button>
                <button class="secondary-btn close-modal-btn">×‘×™×˜×•×œ</button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="/static/ui-helpers.js"></script>
    <script src="/static/app.js"></script>
    <script>
        // ğŸ¨ Icon Rain Animation in Header
        function createIconRain() {
            const header = document.querySelector('.header');
            if (!header) {
                console.log('Header not found, retrying...');
                setTimeout(createIconRain, 500);
                return;
            }
            
            console.log('Creating icon rain...');
            
            // Create container for falling icons
            const rainContainer = document.createElement('div');
            rainContainer.style.cssText = `
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                overflow: hidden;
                z-index: 5;
            `;
            header.style.position = 'relative';
            header.appendChild(rainContainer);
            
            // Icons related to bills, parties, food, drinks, money
            const icons = ['ğŸ’µ', 'ğŸ’°', 'ğŸ’³', 'ğŸ•', 'ğŸ”', 'ğŸº', 'ğŸ·', 'ğŸ¥‚', 'ğŸ‰', 'ğŸŠ', 'ğŸˆ', 'ğŸ¾', 'ğŸ¥—', 'ğŸ', 'ğŸ£', 'ğŸ°', 'â˜•', 'ğŸ»', 'ğŸ’¸', 'ğŸª™'];
            
            function createFallingIcon() {
                const icon = document.createElement('div');
                const randomIcon = icons[Math.floor(Math.random() * icons.length)];
                const startPosition = Math.random() * 100;
                const duration = Math.random() * 4 + 6; // 6-10 seconds (slower)
                const size = Math.random() * 10 + 20; // 20-30px (smaller)
                const delay = Math.random() * 5;
                const rotate = Math.random() * 360;
                const animationName = `iconFall${Math.random().toString(36).substr(2, 9)}`;
                
                icon.textContent = randomIcon;
                icon.style.cssText = `
                    position: absolute;
                    left: ${startPosition}%;
                    top: -60px;
                    font-size: ${size}px;
                    opacity: 0.25;
                    animation: ${animationName} ${duration}s linear ${delay}s infinite;
                    pointer-events: none;
                    z-index: 5;
                `;
                
                // Create unique animation for each icon
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes ${animationName} {
                        0% {
                            transform: translateY(0) rotate(0deg);
                            opacity: 0;
                        }
                        10% {
                            opacity: 0.25;
                        }
                        90% {
                            opacity: 0.25;
                        }
                        100% {
                            transform: translateY(250px) rotate(${rotate}deg);
                            opacity: 0;
                        }
                    }
                `;
                document.head.appendChild(style);
                
                rainContainer.appendChild(icon);
            }
            
            // Create initial icons
            for (let i = 0; i < 25; i++) {
                createFallingIcon();
            }
            
            console.log('Icon rain created with 25 icons');
        }
        
        // Smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // Add ripple effect to buttons
        document.addEventListener('click', function(e) {
            if (e.target.tagName === 'BUTTON' || e.target.closest('button')) {
                const button = e.target.tagName === 'BUTTON' ? e.target : e.target.closest('button');
                const ripple = document.createElement('div');
                
                ripple.style.cssText = `
                    position: absolute;
                    width: 100px;
                    height: 100px;
                    background: rgba(255, 255, 255, 0.6);
                    border-radius: 50%;
                    transform: scale(0);
                    animation: rippleEffect 0.6s ease-out;
                    pointer-events: none;
                    left: ${e.offsetX - 50}px;
                    top: ${e.offsetY - 50}px;
                `;
                
                button.style.position = 'relative';
                button.style.overflow = 'hidden';
                button.appendChild(ripple);
                
                setTimeout(() => ripple.remove(), 600);
            }
        });
        
        // Initialize icon rain on load
        window.addEventListener('DOMContentLoaded', function() {
            createIconRain();
            console.log('ğŸ¨ Ultra Modern Design loaded!');
        });
    </script>
</body>
</html>
