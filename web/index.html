<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The bill - × ×™×”×•×œ ×”×•×¦××•×ª ××©×•×ª×¤×•×ª</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="stylesheet" href="/static/modern-override.css">
    <style>
        /* ğŸ¨ ULTRA MODERN DESIGN 2.0 */
        
        /* Global Enhancements */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            background-attachment: fixed !important;
            min-height: 100vh;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(102, 126, 234, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(118, 75, 162, 0.2) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }
        
        #app-container {
            position: relative;
            z-index: 1;
        }
        
        /* Animated Header */
        header {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(20px) !important;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1) !important;
            position: sticky !important;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(102, 126, 234, 0.2);
        }
        
        header h1 {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 3rem !important;
            font-weight: 800 !important;
            animation: gradientShift 3s ease infinite;
            text-shadow: none !important;
        }
        
        @keyframes gradientShift {
            0%, 100% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(20deg); }
        }
        
        header h2 {
            color: #667eea !important;
            font-weight: 500 !important;
            opacity: 0.8;
        }
        
        /* Glass Morphism Main Container */
        main {
            background: rgba(255, 255, 255, 0.85) !important;
            backdrop-filter: blur(20px) !important;
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.5) !important;
            animation: slideUp 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes slideUp {
            from {
                transform: translateY(100px) scale(0.9);
                opacity: 0;
            }
            to {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }
        
        /* Ultra Modern Buttons */
        .primary-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            color: white !important;
            border: none !important;
            padding: 14px 32px !important;
            font-weight: 600 !important;
            font-size: 1rem !important;
            border-radius: 50px !important;
            box-shadow: 
                0 4px 15px rgba(102, 126, 234, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55) !important;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .primary-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .primary-btn:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .primary-btn:hover {
            transform: translateY(-5px) scale(1.05) !important;
            box-shadow: 
                0 15px 40px rgba(102, 126, 234, 0.6),
                0 5px 15px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
        }
        
        .primary-btn:active {
            transform: translateY(-2px) scale(1.02) !important;
        }
        
        .secondary-btn {
            background: rgba(255, 255, 255, 0.9) !important;
            border: 2px solid #667eea !important;
            color: #667eea !important;
            padding: 12px 28px !important;
            font-weight: 600 !important;
            border-radius: 50px !important;
            backdrop-filter: blur(10px) !important;
            transition: all 0.3s ease !important;
        }
        
        .secondary-btn:hover {
            background: #667eea !important;
            color: white !important;
            transform: translateY(-3px) !important;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4) !important;
        }
        
        .danger-btn {
            background: linear-gradient(135deg, #ff5252 0%, #f48fb1 100%) !important;
            border-radius: 50px !important;
            box-shadow: 0 4px 15px rgba(255, 82, 82, 0.4) !important;
        }
        
        .danger-btn:hover {
            transform: translateY(-5px) scale(1.05) !important;
            box-shadow: 0 15px 40px rgba(255, 82, 82, 0.6) !important;
        }
        
        /* Floating Cards with 3D Effect */
        .group-item,
        .member-item,
        .payment-item {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(10px) !important;
            border: 1px solid rgba(102, 126, 234, 0.2) !important;
            border-radius: 20px !important;
            padding: 24px !important;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55) !important;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08) !important;
        }
        
        .group-item::after,
        .member-item::after,
        .payment-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: left 0.5s;
        }
        
        .group-item:hover::after,
        .member-item:hover::after,
        .payment-item:hover::after {
            left: 100%;
        }
        
        .group-item::before,
        .member-item::before,
        .payment-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
            transform: scaleY(0);
            transform-origin: top;
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        .group-item:hover,
        .member-item:hover,
        .payment-item:hover {
            transform: translateY(-10px) translateX(10px) rotate(1deg) !important;
            box-shadow: 
                0 20px 50px rgba(102, 126, 234, 0.3),
                0 10px 20px rgba(0, 0, 0, 0.1) !important;
            border-color: #667eea !important;
            background: white !important;
        }
        
        .group-item:hover::before,
        .member-item:hover::before,
        .payment-item:hover::before {
            transform: scaleY(1);
        }
        
        /* Glowing Avatar */
        .member-avatar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            box-shadow: 
                0 4px 15px rgba(102, 126, 234, 0.4),
                0 0 30px rgba(102, 126, 234, 0.2) !important;
            animation: avatarPulse 2s ease-in-out infinite;
            position: relative;
        }
        
        @keyframes avatarPulse {
            0%, 100% {
                box-shadow: 
                    0 4px 15px rgba(102, 126, 234, 0.4),
                    0 0 20px rgba(102, 126, 234, 0.2);
            }
            50% {
                box-shadow: 
                    0 4px 20px rgba(102, 126, 234, 0.6),
                    0 0 40px rgba(102, 126, 234, 0.4);
            }
        }
        
        /* Animated Badge */
        .count-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.4) !important;
            animation: badgeBounce 2s ease infinite;
        }
        
        @keyframes badgeBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        /* Success Message with Animation */
        .message.success {
            background: linear-gradient(135deg, #00c9a7 0%, #00f2fe 100%) !important;
            border-radius: 15px !important;
            box-shadow: 0 10px 40px rgba(0, 201, 167, 0.4) !important;
            animation: slideInRight 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(400px) rotate(10deg);
                opacity: 0;
            }
            to {
                transform: translateX(0) rotate(0);
                opacity: 1;
            }
        }
        
        .message.error {
            background: linear-gradient(135deg, #ff5252 0%, #f48fb1 100%) !important;
            border-radius: 15px !important;
            box-shadow: 0 10px 40px rgba(255, 82, 82, 0.4) !important;
        }
        
        /* Glassmorphism Modal */
        .modal {
            backdrop-filter: blur(10px) !important;
            background: rgba(0, 0, 0, 0.5) !important;
        }
        
        .modal-content {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(20px) !important;
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            border-radius: 25px !important;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.3) !important;
            animation: modalPop 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes modalPop {
            0% {
                transform: scale(0.5) rotate(-10deg);
                opacity: 0;
            }
            100% {
                transform: scale(1) rotate(0);
                opacity: 1;
            }
        }
        
        /* Enhanced Tabs */
        .tab-btn {
            position: relative;
            transition: all 0.3s ease !important;
        }
        
        .tab-btn.active {
            color: #667eea !important;
        }
        
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 3px 3px 0 0;
            animation: tabSlide 0.3s ease;
        }
        
        @keyframes tabSlide {
            from {
                width: 0;
                left: 50%;
            }
            to {
                width: 100%;
                left: 0;
            }
        }
        
        /* Floating Animation for Cards */
        .group-item,
        .member-item,
        .payment-item {
            animation: cardFloat 3s ease-in-out infinite;
        }
        
        .group-item:nth-child(2n) {
            animation-delay: 0.5s;
        }
        
        .group-item:nth-child(3n) {
            animation-delay: 1s;
        }
        
        @keyframes cardFloat {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-5px);
            }
        }
        
        /* Loading Screen Enhancement */
        #loading-screen {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
        }
        
        .spinner {
            width: 60px !important;
            height: 60px !important;
            border: 5px solid rgba(255, 255, 255, 0.2) !important;
            border-top: 5px solid white !important;
            animation: spin 0.8s linear infinite, pulse 2s ease-in-out infinite !important;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(180deg); }
        }
        
        /* Enhanced Input Fields */
        input:focus,
        textarea:focus,
        select:focus {
            outline: none !important;
            border-color: #667eea !important;
            box-shadow: 
                0 0 0 4px rgba(102, 126, 234, 0.1),
                0 5px 15px rgba(102, 126, 234, 0.2) !important;
            transform: translateY(-2px) !important;
        }
        
        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 12px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
        }
        
        /* Hover Glow Effect */
        .primary-btn,
        .group-item,
        .member-item,
        .payment-item {
            position: relative;
        }
        
        /* Mobile Responsive Enhancements */
        @media (max-width: 768px) {
            header h1 {
                font-size: 2rem !important;
            }
            
            .primary-btn {
                padding: 12px 24px !important;
                font-size: 0.9rem !important;
            }
        }
    </style>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts - Assistant and Rubik -->
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;500;600;700&family=Rubik:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="spinner"></div>
        <p>×˜×•×¢×Ÿ...</p>
        <div class="loading-dots">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>

    <!-- Error/Success Messages -->
    <div id="error-container" class="message error"></div>
    <div id="success-container" class="message success"></div>

    <!-- Main Container -->
    <div id="app-container">
        <!-- Header -->
        <header>
            <h1>The bill</h1>
            <h2>× ×™×”×•×œ ×”×•×¦××•×ª ××©×•×ª×¤×•×ª</h2>
        </header>

        <!-- Main Content Area -->
        <main>
            <!-- Home Page (Groups List) -->
            <section id="groups-screen" class="screen active">
                <div class="screen-header">
                    <h3>×”×§×‘×•×¦×•×ª ×©×œ×™</h3>
                    <button id="create-group-btn" class="primary-btn">×§×‘×•×¦×” ×—×“×©×”</button>
                </div>
                <div id="groups-list" class="items-list">
                    <!-- Groups will be added dynamically -->
                </div>
            </section>

            <!-- Group Screen -->
            <section id="group-screen" class="screen">
                <div class="screen-header">
                    <button class="back-btn" data-target="groups-screen">×—×–×¨×”</button>
                    <h3 id="group-name">×©× ×”×§×‘×•×¦×”</h3>
                    <div class="action-buttons">
                        <button id="help-btn" class="secondary-btn"><i class="fas fa-question-circle"></i> ×¢×–×¨×”</button>
                        <button id="edit-group-btn" class="secondary-btn"><i class="fas fa-edit"></i> ×¢×¨×™×›×”</button>
                        <button id="delete-group-btn" class="danger-btn"><i class="fas fa-trash"></i> ××—×™×§×”</button>
                    </div>
                </div>

                <div class="tabs">
                    <button class="tab-btn active" data-tab="members">
                        ×—×‘×¨×™× <span class="count-badge" id="members-count">0</span>
                    </button>
                    <button class="tab-btn" data-tab="payments">
                        ×ª×©×œ×•××™× <span class="count-badge" id="payments-count">0</span>
                    </button>
                    <button class="tab-btn" data-tab="balance">××™×–×•×Ÿ</button>
                </div>

                <div id="members-tab" class="tab-content active">
                    <div class="tab-header">
                        <h4>×—×‘×¨×™ ×”×§×‘×•×¦×”</h4>
                        <button id="add-member-btn" class="primary-btn"> ×”×•×¡×£ ×—×‘×¨</button>
                    </div>
                    <div id="members-list" class="items-list">
                        <!-- Members will be added dynamically -->
                    </div>
                </div>

                <div id="payments-tab" class="tab-content">
                    <div class="tab-header">
                        <div class="filter-controls">
                            <select id="payment-filter">
                                <option value="all">×›×œ ×”×ª×©×œ×•××™×</option>
                                <option value="my-expenses">×”×ª×©×œ×•××™× ×©×œ×™</option>
                                <option value="involving-me">×©×™×œ××• ×¢×‘×•×¨×™</option>
                            </select>
                        </div>
                        <button id="add-payment-btn" class="primary-btn"> ×”×•×¡×£ ×ª×©×œ×•×</button>
                    </div>
                    <div id="payments-list" class="items-list">
                        <!-- Payments will be added dynamically -->
                    </div>
                </div>

                <div id="balance-tab" class="tab-content">
                    <div class="section-title">
                        <h4>×¡×™×›×•× ×”×¢×‘×¨×•×ª ×›×¡×¤×™×</h4>
                        <div class="action-buttons">
                            <button id="export-summary-btn" class="secondary-btn small">×™×™×¦×•× ×¡×™×›×•× ×œ×—×‘×¨×™×</button>
                            <button id="export-data-btn" class="secondary-btn small">×™×™×¦×•× × ×ª×•× ×™×</button>
                        </div>
                    </div>
                    <div id="transfers-list" class="items-list">
                        <!-- Transfers will be added dynamically -->
                    </div>
                </div>
            </section>

            <!-- Member Details Screen -->
            <section id="member-screen" class="screen">
                <div class="screen-header">
                    <button class="back-btn" onclick="showScreen('group-screen')">×—×–×¨×”</button>
                    <h3 id="member-name">×©× ×”×—×‘×¨</h3>
                    <div class="action-buttons">
                        <button id="edit-member-btn" class="secondary-btn">×¢×¨×™×›×”</button>
                        <button id="remove-member-btn" class="danger-btn">×”×¡×¨×”</button>
                    </div>
                </div>

                <div id="member-summary">
                    <div class="balance-info">
                        <h4>×××–×Ÿ ×›×¡×¤×™</h4>
                        <p id="member-balance" class="balance">0 â‚ª</p>
                    </div>

                    <div class="transfers-section">
                        <div id="member-pays-to">
                            <h4>×œ×©×œ× ×œ:</h4>
                            <ul class="transfers">
                                <!-- Will be populated dynamically -->
                            </ul>
                        </div>
                        <div id="member-receives-from">
                            <h4>×œ×§×‘×œ ×:</h4>
                            <ul class="transfers">
                                <!-- Will be populated dynamically -->
                            </ul>
                        </div>
                    </div>

                    <div class="payments-section">
                        <h4>×”×™×¡×˜×•×¨×™×™×ª ×ª×©×œ×•××™×</h4>
                        <div id="member-payments" class="items-list">
                            <!-- Will be populated dynamically -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Payment Details Screen -->
            <section id="payment-screen" class="screen">
                <div class="screen-header">
                    <button class="back-btn" onclick="showScreen('group-screen')">×—×–×¨×”</button>
                    <h3 id="payment-title">×¤×¨×˜×™ ×ª×©×œ×•×</h3>
                    <div class="action-buttons">
                        <button id="edit-payment-btn" class="secondary-btn">×¢×¨×™×›×”</button>
                        <button id="delete-payment-btn" class="danger-btn">××—×™×§×”</button>
                    </div>
                </div>

                <div id="payment-details">
                    <div class="payment-info">
                        <div class="info-row">
                            <span class="label">×¡×›×•×:</span>
                            <span id="payment-amount" class="value">0 â‚ª</span>
                        </div>
                        <div class="info-row">
                            <span class="label">×©×™×œ×:</span>
                            <span id="payment-payer" class="value"></span>
                        </div>
                        <div class="info-row">
                            <span class="label">×ª××¨×™×š:</span>
                            <span id="payment-date" class="value"></span>
                        </div>
                        <div class="info-row">
                            <span class="label">×ª×™××•×¨:</span>
                            <span id="payment-description" class="value"></span>
                        </div>
                    </div>

                    <div class="payment-breakdown">
                        <h4>×—×œ×•×§×ª ×”×ª×©×œ×•×</h4>
                        <div class="info-row">
                            <span class="label">×¡×›×•× ××§×•×¨×™:</span>
                            <span id="original-amount" class="value">0 â‚ª</span>
                        </div>
                        <div class="info-row">
                            <span class="label">×¡×›×•× ××¢×•×’×œ:</span>
                            <span id="rounded-amount" class="value">0 â‚ª</span>
                        </div>
                        <div class="info-row">
                            <span class="label">×¡×›×•× ×œ××“×:</span>
                            <span id="per-person-amount" class="value">0 â‚ª</span>
                        </div>
                    </div>

                    <div class="participants-section">
                        <h4>××©×ª×ª×¤×™×</h4>
                        <ul id="participant-list">
                            <!-- Will be populated dynamically -->
                        </ul>
                    </div>

                    <div class="transfers-section">
                        <h4>×”×¢×‘×¨×•×ª ×œ××™×–×•×Ÿ</h4>
                        <ul id="payment-transfers" class="transfers">
                            <!-- Will be populated dynamically -->
                        </ul>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modals -->
    <!-- Create Group Modal -->
    <div id="create-group-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>×™×¦×™×¨×ª ×§×‘×•×¦×” ×—×“×©×”</h3>
            <form id="create-group-form">
                <div class="form-group">
                    <label for="group-name-input">×©× ×”×§×‘×•×¦×”</label>
                    <input type="text" id="group-name-input" required>
                </div>
                <div class="form-group">
                    <label for="admin-first-name">×©× ×¤×¨×˜×™ (×× ×”×œ)</label>
                    <input type="text" id="admin-first-name" required>
                </div>
                <div class="form-group">
                    <label for="admin-last-name">×©× ××©×¤×—×” (×× ×”×œ)</label>
                    <input type="text" id="admin-last-name" required>
                </div>
                <button type="submit" class="primary-btn">×¦×•×¨ ×§×‘×•×¦×”</button>
            </form>
        </div>
    </div>

    <!-- Add Member Modal -->
    <div id="add-member-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>×”×•×¡×¤×ª ×—×‘×¨ ×œ×§×‘×•×¦×”</h3>
            <form id="add-member-form">
                <div class="form-group">
                    <label for="first-name-input">×©× ×¤×¨×˜×™</label>
                    <input type="text" id="first-name-input" required>
                </div>
                <div class="form-group">
                    <label for="last-name-input">×©× ××©×¤×—×”</label>
                    <input type="text" id="last-name-input" required>
                </div>
                <button type="submit" class="primary-btn">×”×•×¡×£ ×—×‘×¨</button>
            </form>
        </div>
    </div>

    <!-- Add Payment Modal -->
    <div id="add-payment-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>×”×•×¡×¤×ª ×ª×©×œ×•× ×—×“×©</h3>
            <form id="add-payment-form">
                <div class="form-group">
                    <label for="payment-title-input">×›×•×ª×¨×ª ×ª×©×œ×•×</label>
                    <input type="text" id="payment-title-input" required>
                </div>
                <div class="form-group">
                    <label for="payment-amount-input">×¡×›×•×</label>
                    <input type="number" id="payment-amount-input" min="1" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="payment-payer-select">××™ ×©×™×œ×?</label>
                    <select id="payment-payer-select" required>
                        <!-- Will be populated dynamically -->
                    </select>
                </div>
                <div class="form-group">
                    <label>×¢×‘×•×¨ ××™?</label>
                    <div id="payment-participants" class="checkbox-group">
                        <!-- Will be populated dynamically -->
                    </div>
                </div>
                <div class="form-group">
                    <label for="payment-desc-input">×ª×™××•×¨ (××•×¤×¦×™×•× ×œ×™)</label>
                    <textarea id="payment-desc-input"></textarea>
                </div>
                <button type="submit" class="primary-btn">×”×•×¡×£ ×ª×©×œ×•×</button>
            </form>
        </div>
    </div>

    <!-- Edit Member Modal -->
    <div id="edit-member-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>×¢×¨×™×›×ª ×¤×¨×˜×™ ×—×‘×¨</h3>
            <form id="edit-member-form">
                <input type="hidden" id="edit-member-old-name">
                <div class="form-group">
                    <label for="edit-first-name">×©× ×¤×¨×˜×™</label>
                    <input type="text" id="edit-first-name" required>
                </div>
                <div class="form-group">
                    <label for="edit-last-name">×©× ××©×¤×—×”</label>
                    <input type="text" id="edit-last-name" required>
                </div>
                <div class="form-group">
                    <label for="edit-member-permissions">×”×¨×©××•×ª:</label>
                    <select id="edit-member-permissions">
                        <option value="true">×™×›×•×œ ×œ×”×•×¡×™×£ ×ª×©×œ×•××™×</option>
                        <option value="false">×œ× ×™×›×•×œ ×œ×”×•×¡×™×£ ×ª×©×œ×•××™×</option>
                    </select>
                </div>
                <button type="submit" class="primary-btn">×©××•×¨ ×©×™× ×•×™×™×</button>
            </form>
        </div>
    </div>

    <!-- Edit Payment Modal -->
    <div id="edit-payment-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>×¢×¨×™×›×ª ×ª×©×œ×•×</h3>
            <form id="edit-payment-form">
                <input type="hidden" id="edit-payment-id">
                <div class="form-group">
                    <label for="edit-payment-title">×›×•×ª×¨×ª ×ª×©×œ×•×</label>
                    <input type="text" id="edit-payment-title" required>
                </div>
                <div class="form-group">
                    <label for="edit-payment-amount">×¡×›×•×</label>
                    <input type="number" id="edit-payment-amount" min="1" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="edit-payment-payer">××™ ×©×™×œ×?</label>
                    <select id="edit-payment-payer" required>
                        <!-- Will be populated dynamically -->
                    </select>
                </div>
                <div class="form-group">
                    <label>×¢×‘×•×¨ ××™?</label>
                    <div id="edit-payment-participants" class="checkbox-group">
                        <!-- Will be populated dynamically -->
                    </div>
                </div>
                <div class="form-group">
                    <label for="edit-payment-desc">×ª×™××•×¨ (××•×¤×¦×™×•× ×œ×™)</label>
                    <textarea id="edit-payment-desc"></textarea>
                </div>
                <button type="submit" class="primary-btn">×©××•×¨ ×©×™× ×•×™×™×</button>
            </form>
        </div>
    </div>

    <!-- Summary Export Modal -->
    <div id="summary-modal" class="modal">
        <div class="modal-content summary-modal-content">
            <span class="close-modal">&times;</span>
            <h3>×¡×™×›×•× ×ª×©×œ×•××™× ×œ×—×‘×¨×™×</h3>
            <div class="summary-actions">
                <button id="copy-summary-btn" class="primary-btn">
                    <i class="fas fa-copy"></i> ×”×¢×ª×§ ×œ×œ×•×—
                </button>
            </div>
            <pre id="summary-content" class="summary-content"></pre>
        </div>
    </div>

    <!-- Member Merge Modal -->
    <div id="merge-members-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>××™×—×•×“ ×—×‘×¨×™×</h3>
            <p>×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×“ ××ª ×”×—×‘×¨×™× ×”×‘××™×?</p>
            <div class="merge-members-list">
                <div id="member-to-merge-from" class="member-merge-item"></div>
                <div class="merge-arrow"><i class="fas fa-arrow-right"></i></div>
                <div id="member-to-merge-to" class="member-merge-item"></div>
            </div>
            <p class="merge-warning">×©×™× ×œ×‘! ×¤×¢×•×œ×” ×–×• ×œ× × ×™×ª× ×ª ×œ×‘×™×˜×•×œ.</p>
            <div class="modal-actions">
                <button id="confirm-merge-btn" class="primary-btn">××™×©×•×¨ ××™×—×•×“</button>
                <button class="secondary-btn close-modal-btn">×‘×™×˜×•×œ</button>
            </div>
        </div>
    </div>

    <!-- Edit Group Modal -->
    <div id="edit-group-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>×¢×¨×™×›×ª ×¤×¨×˜×™ ×§×‘×•×¦×”</h3>
            <form id="edit-group-form">
                <div class="form-group">
                    <label for="edit-group-name">×©× ×”×§×‘×•×¦×”</label>
                    <input type="text" id="edit-group-name" required>
                </div>
                <button type="submit" class="primary-btn">×©××•×¨ ×©×™× ×•×™×™×</button>
            </form>
        </div>
    </div>

    <!-- Delete Group Modal -->
    <div id="delete-group-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>××—×™×§×ª ×§×‘×•×¦×”</h3>
            <p>×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª ×”×§×‘×•×¦×” <span id="delete-group-name" class="highlight"></span>?</p>
            <p class="warning">×©×™× ×œ×‘! ×¤×¢×•×œ×” ×–×• ××™× ×” × ×™×ª× ×ª ×œ×‘×™×˜×•×œ.</p>
            <div class="modal-actions">
                <button id="confirm-delete-group-btn" class="danger-btn">×›×Ÿ, ××—×§ ×§×‘×•×¦×”</button>
                <button class="secondary-btn close-modal-btn">×‘×™×˜×•×œ</button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="help-modal" class="modal">
        <div class="modal-content help-modal-content">
            <span class="close-modal">&times;</span>
            <h3>××“×¨×™×š ×©×™××•×© - TheBill</h3>
            <div class="help-content">
                <h4>× ×™×”×•×œ ×§×‘×•×¦×•×ª</h4>
                <ul>
                    <li><strong>×™×¦×™×¨×ª ×§×‘×•×¦×”:</strong> ×œ×—×¥ ×¢×œ "×§×‘×•×¦×” ×—×“×©×”" ×‘××¡×š ×”×¨××©×™, ×”×–×Ÿ ××ª ×”×¤×¨×˜×™× ×•×œ×—×¥ "×¦×•×¨ ×§×‘×•×¦×”"</li>
                    <li><strong>×¢×¨×™×›×ª ×§×‘×•×¦×”:</strong> ×œ×—×¥ ×¢×œ "×¢×¨×™×›×”" ×‘×›×•×ª×¨×ª ×”×§×‘×•×¦×”, ×©× ×” ××ª ×”×©× ×•×œ×—×¥ "×©××•×¨ ×©×™× ×•×™×™×"</li>
                    <li><strong>××—×™×§×ª ×§×‘×•×¦×”:</strong> ×œ×—×¥ ×¢×œ "××—×™×§×”" ×‘×›×•×ª×¨×ª ×”×§×‘×•×¦×” (××¤×©×¨×™ ×¨×§ ×›××©×¨ ×›×œ ×”×™×ª×¨×•×ª ×××•×¤×¡×•×ª)</li>
                </ul>
                
                <h4>× ×™×”×•×œ ×—×‘×¨×™×</h4>
                <ul>
                    <li><strong>×”×•×¡×¤×ª ×—×‘×¨:</strong> ×¢×‘×•×¨ ×œ×œ×©×•× ×™×ª "×—×‘×¨×™×", ×œ×—×¥ ×¢×œ "×”×•×¡×£ ×—×‘×¨", ×”×–×Ÿ ××ª ×”×¤×¨×˜×™× ×•×œ×—×¥ "×”×•×¡×£ ×—×‘×¨"</li>
                    <li><strong>×¢×¨×™×›×ª ×—×‘×¨:</strong> ×œ×—×¥ ×¢×œ ×”×—×‘×¨ ×©×‘×¨×¦×•× ×š ×œ×¢×¨×•×š, ×œ×—×¥ "×¢×¨×™×›×”", ×©× ×” ××ª ×”×¤×¨×˜×™× ×•×œ×—×¥ "×©××•×¨ ×©×™× ×•×™×™×"</li>
                    <li><strong>×”×¡×¨×ª ×—×‘×¨:</strong> ×œ×—×¥ ×¢×œ ×”×—×‘×¨ ×©×‘×¨×¦×•× ×š ×œ×”×¡×™×¨, ×œ×—×¥ "×”×¡×¨×”" (××¤×©×¨×™ ×›×©×”×™×ª×¨×” 0)</li>
                    <li><strong>××™×—×•×“ ×—×‘×¨×™×:</strong> ×’×¨×•×¨ ×—×‘×¨ ××—×“ ××œ ×—×‘×¨ ××—×¨ ×›×“×™ ×œ××—×“ ××•×ª× ×œ×™×—×™×“×” ×›×œ×›×œ×™×ª ××—×ª</li>
                </ul>
                
                <h4>× ×™×”×•×œ ×ª×©×œ×•××™×</h4>
                <ul>
                    <li><strong>×”×•×¡×¤×ª ×ª×©×œ×•×:</strong> ×¢×‘×•×¨ ×œ×œ×©×•× ×™×ª "×ª×©×œ×•××™×", ×œ×—×¥ "×”×•×¡×£ ×ª×©×œ×•×", ××œ× ××ª ×”×¤×¨×˜×™× ×•×œ×—×¥ "×”×•×¡×£ ×ª×©×œ×•×"</li>
                    <li><strong>×¢×¨×™×›×ª ×ª×©×œ×•×:</strong> ×œ×—×¥ ×¢×œ ×”×ª×©×œ×•×, ×œ×—×¥ "×¢×¨×™×›×”", ×©× ×” ××ª ×”×¤×¨×˜×™× ×•×œ×—×¥ "×©××•×¨ ×©×™× ×•×™×™×"</li>
                    <li><strong>××—×™×§×ª ×ª×©×œ×•×:</strong> ×œ×—×¥ ×¢×œ ×”×ª×©×œ×•×, ×œ×—×¥ "××—×™×§×”" ×•××©×¨ ××ª ×”××—×™×§×”</li>
                </ul>
                
                <h4>××™×–×•×Ÿ ×•×™×™×¦×•×</h4>
                <ul>
                    <li><strong>×¦×¤×™×™×” ×‘×”×¢×‘×¨×•×ª:</strong> ×¢×‘×•×¨ ×œ×œ×©×•× ×™×ª "××™×–×•×Ÿ" ×œ×¦×¤×™×™×” ×‘×”×¢×‘×¨×•×ª ×”×›×¡×¤×™× ×”××•××œ×¦×•×ª</li>
                    <li><strong>×™×™×¦×•× ×¡×™×›×•×:</strong> ×‘×œ×©×•× ×™×ª "××™×–×•×Ÿ", ×œ×—×¥ ×¢×œ "×™×™×¦×•× ×¡×™×›×•× ×œ×—×‘×¨×™×" ×œ×”×¢×ª×§×ª ×¡×™×›×•× ××¤×•×¨×˜ ×©×œ ×”×ª×©×œ×•××™×</li>
                    <li><strong>×™×™×¦×•× × ×ª×•× ×™×:</strong> ×‘×œ×©×•× ×™×ª "××™×–×•×Ÿ", ×œ×—×¥ ×¢×œ "×™×™×¦×•× × ×ª×•× ×™×" ×•×‘×—×¨ ×¤×•×¨××˜ (JSON ××• CSV)</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="/static/ui-helpers.js"></script>
    <script src="/static/app.js"></script>
    <script>
        // ğŸ¨ Ultra Modern Interactive Effects
        
        // Particle Background Effect
        function createParticles() {
            const particles = document.createElement('div');
            particles.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: 0;
            `;
            
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.style.cssText = `
                    position: absolute;
                    width: ${Math.random() * 4 + 2}px;
                    height: ${Math.random() * 4 + 2}px;
                    background: rgba(255, 255, 255, 0.6);
                    border-radius: 50%;
                    top: ${Math.random() * 100}%;
                    left: ${Math.random() * 100}%;
                    animation: particleFloat ${Math.random() * 10 + 10}s linear infinite;
                    animation-delay: ${Math.random() * 5}s;
                `;
                particles.appendChild(particle);
            }
            
            document.body.appendChild(particles);
        }
        
        // Add particle animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes particleFloat {
                0% {
                    transform: translateY(100vh) translateX(0) scale(0);
                    opacity: 0;
                }
                10% {
                    opacity: 1;
                }
                90% {
                    opacity: 1;
                }
                100% {
                    transform: translateY(-100vh) translateX(${Math.random() * 200 - 100}px) scale(1);
                    opacity: 0;
                }
            }
            
            @keyframes ripple {
                0% {
                    transform: scale(0);
                    opacity: 1;
                }
                100% {
                    transform: scale(4);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
        
        // Create ripple effect on button clicks
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('primary-btn') || 
                e.target.classList.contains('secondary-btn')) {
                const ripple = document.createElement('span');
                const rect = e.target.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                const x = e.clientX - rect.left - size / 2;
                const y = e.clientY - rect.top - size / 2;
                
                ripple.style.cssText = `
                    position: absolute;
                    width: ${size}px;
                    height: ${size}px;
                    border-radius: 50%;
                    background: rgba(255, 255, 255, 0.6);
                    left: ${x}px;
                    top: ${y}px;
                    animation: ripple 0.6s ease-out;
                    pointer-events: none;
                `;
                
                e.target.style.position = 'relative';
                e.target.style.overflow = 'hidden';
                e.target.appendChild(ripple);
                
                setTimeout(() => ripple.remove(), 600);
            }
        });
        
        // Mouse trail effect
        let mouseTrail = [];
        document.addEventListener('mousemove', function(e) {
            const trail = document.createElement('div');
            trail.style.cssText = `
                position: fixed;
                width: 8px;
                height: 8px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                border-radius: 50%;
                pointer-events: none;
                z-index: 99999;
                left: ${e.clientX - 4}px;
                top: ${e.clientY - 4}px;
                opacity: 0.6;
                animation: trailFade 0.5s ease-out forwards;
            `;
            
            document.body.appendChild(trail);
            mouseTrail.push(trail);
            
            if (mouseTrail.length > 10) {
                const old = mouseTrail.shift();
                old.remove();
            }
            
            setTimeout(() => trail.remove(), 500);
        });
        
        const trailStyle = document.createElement('style');
        trailStyle.textContent = `
            @keyframes trailFade {
                to {
                    transform: scale(0);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(trailStyle);
        
        // Add tilt effect to cards
        document.addEventListener('mousemove', function(e) {
            const cards = document.querySelectorAll('.group-item, .member-item, .payment-item');
            cards.forEach(card => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                if (x >= 0 && x <= rect.width && y >= 0 && y <= rect.height) {
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    const rotateX = (y - centerY) / 10;
                    const rotateY = (centerX - x) / 10;
                    
                    card.style.transform = `
                        perspective(1000px) 
                        rotateX(${rotateX}deg) 
                        rotateY(${rotateY}deg) 
                        translateY(-10px) 
                        translateX(10px) 
                        scale(1.02)
                    `;
                }
            });
        });
        
        document.addEventListener('mouseleave', function(e) {
            if (e.target.classList.contains('group-item') ||
                e.target.classList.contains('member-item') ||
                e.target.classList.contains('payment-item')) {
                e.target.style.transform = '';
            }
        });
        
        // Initialize particles on load
        window.addEventListener('DOMContentLoaded', function() {
            createParticles();
            console.log('ğŸ¨ Ultra Modern Design loaded!');
        });
        
        // Confetti effect for success
        function createConfetti() {
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                const colors = ['#667eea', '#764ba2', '#00c9a7', '#ff5252', '#ffc107'];
                confetti.style.cssText = `
                    position: fixed;
                    width: ${Math.random() * 10 + 5}px;
                    height: ${Math.random() * 10 + 5}px;
                    background: ${colors[Math.floor(Math.random() * colors.length)]};
                    left: ${Math.random() * 100}vw;
                    top: -20px;
                    opacity: ${Math.random() * 0.5 + 0.5};
                    transform: rotate(${Math.random() * 360}deg);
                    pointer-events: none;
                    z-index: 99999;
                    animation: confettiFall ${Math.random() * 3 + 2}s ease-out forwards;
                `;
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 5000);
            }
        }
        
        const confettiStyle = document.createElement('style');
        confettiStyle.textContent = `
            @keyframes confettiFall {
                to {
                    transform: translateY(100vh) rotate(${Math.random() * 720}deg);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(confettiStyle);
        
        // Override showSuccess to add confetti
        const originalShowSuccess = window.showSuccess;
        window.showSuccess = function(message) {
            if (originalShowSuccess) originalShowSuccess(message);
            createConfetti();
        };
    </script>
</body>
</html>
